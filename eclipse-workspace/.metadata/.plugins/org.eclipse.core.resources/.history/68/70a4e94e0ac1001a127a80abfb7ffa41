package com.proyectocsi.api.rest.models.dao;

import java.util.List;

import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.CrudRepository;

import com.proyectocsi.api.rest.models.entity.Grupo;
import com.proyectocsi.api.rest.models.entity.Inscripcion;

public interface IInscripcionDao extends CrudRepository<Inscripcion, Long> {
	
	@Query("insert into Inscripcion(matricula, grupo) values(?1,?2)")
	public void InsertInscripcion(Long matricula, Long grupo);
	
	@Query("delete from Inscripcion i where i.matricula=?1 and i.grupo=?2")
	public void DeleteInscripcion(Long matricula, Long grupo);
	
	@Query("select g from Grupo g inner join Inscripcion i on g.id = i.grupo left join Alumno a on i.matricula = a.matricula where a.matricula!= ?1")
	public List<Grupo> findAllByNotRegistered(Long idMatricula);
	
	@Query("select g from Grupo g inner join Inscripcion i on g.id = i.grupo inner join Alumno a on i.matricula = a.matricula where a.matricula = ?1")
	public List<Grupo> findAllByRegistered(Long idMatricula);
}
